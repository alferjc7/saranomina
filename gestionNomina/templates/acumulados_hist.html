{% extends "base.html" %}
{% load formatos %}

{% block title %}Acumulados Historico{% endblock %}
{% block content %}
<h2>Historico de acumulados</h2>

<form method="get">
    <div class="card">
        <div class="form-grid-6">
    
            <div>
                <div class="form-group2">
                    <input type="text" name="contrato" placeholder="Contrato" value="{{ request.GET.contrato }}">
                </div>
            </div>
            <div>
                <div class="form-group2">
                    <input type="text" name="anio" placeholder="A√±o" value="{{ request.GET.anio }}">
                </div>
            </div>
            <div>
                <div class="form-group2">
                    <input type="text" name="mes" placeholder="Mes" value="{{ request.GET.mes }}">
                </div>
            </div>
            <div>
                <div class="form-group2">
                    <input type="text" name="periodo" placeholder="Periodo" value="{{ request.GET.periodo }}">
                </div>
            </div>
            <div>
                <div class="form-group2">
                    <input type="text" name="concepto" placeholder="Concepto" value="{{ request.GET.concepto }}">
                </div>
            </div>
            <div>
                <div class="form-group2">
                    <button type="submit">üîçBuscar</button>
                </div>
            </div>
        </div>
    </div>
</form>

<div class="table-container">
<table>
    <thead>
        <tr>
            <th>Empresa</th>
            <th>Contrato</th>
            <th>Identificacion</th>
            <th>Nombre completo</th>
            <th>Tipo Nomina</th>
            <th>Periodo Nomina</th>
            <th>A√±o</th>
            <th>Mes</th>
            <th>Periodo</th>
            <th>Fecha novedad</th>
            <th>Fecha inicio</th>
            <th>Fecha fin</th>
            <th>Concepto</th>
            <th>Desc Concepto</th>
            <th>Unidad</th>
            <th>Base</th>
            <th>Valor</th>
            <th>Modulo</th>
        </tr>
    </thead>
    <tbody>
        {% for reporte in acumulados_hist %}
        <tr>
            <td>{{ reporte.contrato.empresa.razon_social }}</td>
            <td>{{ reporte.contrato.cod_contrato }}</td>
            <td>{{ reporte.contrato.identificacion.identificacion }}</td>
            <td>{{ reporte.contrato.identificacion.nombre|default:'' }} {{ reporte.contrato.identificacion.segundo_nombre|default:''}} 
                {{ reporte.contrato.identificacion.apellido|default:'' }} {{ reporte.contrato.identificacion.segundo_apellido|default:'' }}
            </td>
            <td>{{ reporte.tipo_nomina }}</td>
            <td>{{ reporte.periodo_nomina.codigo }}</td>
            <td>{{ reporte.anio }}</td>
            <td>{{ reporte.mes }}</td>
            <td>{{ reporte.periodo }}</td>
            <td>{{ reporte.fecha_novedad|date:"d/m/Y" }}</td>
            <td>{{ reporte.fecha_inicio|date:"d/m/Y" }}</td>
            <td>{{ reporte.fecha_fin|date:"d/m/Y" }}</td>
            <td class="td-valor">{{ reporte.concepto.cod_concepto.cod_concepto }}</td>
            <td>{{ reporte.concepto.desc_concepto_emp }}</td>
            <td class="td-valor">{{ reporte.unidad }}</td>
            <td class="td-valor">{{ reporte.base|moneda }}</td>
            <td class="td-valor">{{ reporte.valor|moneda }}</td>
            <td>{{ reporte.modulo }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}
{% block scripts %}
{% endblock %}